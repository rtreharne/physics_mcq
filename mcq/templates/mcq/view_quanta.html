{% extends 'mcq/base.html' %}
{% block title %}{{ quanta.name }}{% endblock %}

{% block content %}
<h2 class="mb-4">{{ quanta.name }}</h2>

<p>
  <strong>Invite Link:</strong>
  <code>{{ request.build_absolute_uri|cut:request.get_full_path }}{% url 'join_quanta' invite_code=quanta.invite_code %}
</code>
</p>

<p><strong>Visibility:</strong>
  {% if quanta.visibility == 'creator_only' %} Only visible to you (creator)
  {% elif quanta.visibility == 'all_members' %} Visible to all members
  {% else %} Anonymous
  {% endif %}
</p>

<h4 class="mt-4">Members ({{ member_data|length }})</h4>
<ul class="list-group">
  {% for member in member_data %}
    <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
      <div>
        <strong>{{ member.name }}</strong><br>
        <small class="text-muted">
          {% if member.accuracy is not None %}🧠 Accuracy: {{ member.accuracy }}% · {% endif %}
          📈 Completion: {{ member.completion }}% ·
          ⭐ Points: {{ member.points }} · 
          🔗 Chain: {{ member.chain_length }} · 
          🕓 Last Quiz: {{ member.last_quiz|date:"M j, H:i" }}
        </small>
      </div>
    </li>
  {% endfor %}
</ul>

{% endblock %}
